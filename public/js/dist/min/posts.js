var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var o in e)__hasProp.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};$(function(){return ppu.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.urlRoot="/api/posts",e}(Backbone.Model),ppu.Posts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.url="/api/posts",e.prototype.model=ppu.Post,e}(Backbone.Collection),ppu.PostView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template=$("#post-template"),e.prototype.className="col-md-6 col-sm-6 col-xs-12 post-item",e.prototype.render=function(){var t;return t=app.compile(this.template),$(this.el).html(t(this.model.toJSON())),this},e}(Backbone.View),ppu.PostFeaturedView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template=$("#post-template"),e.prototype.className="col-md-6 col-sm-6 col-xs-12 post-featured-item",e.prototype.render=function(){var t;return t=app.compile(this.template),$(this.el).html(t(this.model.toJSON())),this},e}(Backbone.View),ppu.PostsView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.el=$("#posts"),e.prototype.initialize=function(){return this.listenTo(this.collection,"reset",this.render),app.pubsub.on("posts:filter",this.filterCollection,this),app.pubsub.on("apply:filters",this.filterCollection,this)},e.prototype.filterCollection=function(t){return t=_.extend({lang:app.lang,not_featured:!0},t),this.collection.fetch({reset:!0,data:t})},e.prototype.renderOne=function(t){return ppu.postView=new ppu.PostView({model:t}),this.$el.append(ppu.postView.render().el)},e.prototype.render=function(){return this.$el.empty(),this.collection.each(function(t){return this.renderOne(t)},this)},e}(Backbone.View),ppu.PostMainFeaturedView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template=$("#post-main-featured-template"),e.prototype.className="col-md-6 col-sm-6 col-xs-12 post-main-featured-item",e.prototype.render=function(){var t;return t=app.compile(this.template),$(this.el).html(t(this.model.toJSON())),this},e}(Backbone.View),ppu.PostsFeaturedView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.el=$("#posts-featured"),e.prototype.initialize=function(){return this.listenTo(this.collection,"reset",this.render),app.pubsub.bind("posts:rendered",this.getFeatured,this)},e.prototype.getFeatured=function(){return this.collection.fetch({reset:!0,data:{featured:!0}})},e.prototype.renderMain=function(t){return ppu.postMainFeaturedView=new ppu.PostMainFeaturedView({model:t}),this.$el.prepend(ppu.postMainFeaturedView.render().el)},e.prototype.renderOne=function(t){return ppu.postView=new ppu.PostFeaturedView({model:t}),this.$el.append(ppu.postView.render().el)},e.prototype.render=function(){return this.collection.each(function(t){return 1===t.get("featured")?this.renderMain(t):this.renderOne(t)},this)},e}(Backbone.View),ppu.PostsFilters=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.el=$("#top-bar"),e.prototype.template=$("#posts-filter"),e.prototype.events={"change .country":"byCountry","change .category":"byCategory","keydown .query":"byKeyword","submit .search":"bySearch"},e.prototype.initialize=function(){return this.filtersAplied={lang:app.lang,not_featured:!0}},e.prototype.render=function(){var t;return t=app.compile(this.template),this.$el.html(t),ppu.appendSelect(this.el)},e.prototype.filterBy=function(t){return t=_.extend(this.filtersAplied,t),app.pubsub.trigger("posts:filter",t)},e.prototype.byCountry=function(t){var e,r;return e=$(t.currentTarget),2===$(".countries").find('input[type="checkbox"]:checked').length?this.filterBy({country:""}):e.find(":not(:checked)")?(r=this.CountryNotChecked(e),this.filterBy({country:r})):void 0},e.prototype.CountryNotChecked=function(t){var e;return e="Colombia"===t.val()?"Chile":"Colombia",$(".countries").find("input[value='"+e+"']").prop("checked",!0),e},e.prototype.byCategory=function(t){var e;return e=$(t.currentTarget).find("select").val(),this.filterBy({category:e})},e.prototype.byKeyword=function(t){var e;return e=$(t.currentTarget).val(),e.length>=1?this.filterBy({keyword:e}):void 0},e.prototype.bySearch=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).find(".query").val(),this.filterBy({keyword:e})},e}(Backbone.View),ppu.PostDetailView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.el=$("#post-detail"),e.prototype.template=$("#post-detail-template"),e.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.getTitle()},e.prototype.getTitle=function(){return $("#top-bar").html($("#post-detail-title").html())},e.prototype.render=function(){var t;return t=app.compile(this.template),this.$el.html(t(this.model.toJSON())),this.setUrlTranslation(this.model)},e}(Backbone.View)});